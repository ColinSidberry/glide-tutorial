@import "../common";

/* =============== PAGE STRUCTURE =============== */

body {
  margin: 0;
  border-top: solid 1.5rem $theme-clientcolor;

  // you can change this, but check things carefully if you do
  background-color: $theme-backgroundcolor;

  // this makes sure that the browser doesn't try to change font sizes itself in
  // a way that causes text to overflow boxes rather than growing them
  -webkit-text-size-adjust: none;

  @media print { border-top: none; }
}

.page-content {
  position: absolute;
  top: 0;
  left: 0;
  padding-bottom: 4em;

  /* fit nicely on ipad portrait */
  max-width: 800px;
  margin: 2em 2em 0 5%;
  min-height: 100vh;

  @media (min-width: 768px) {
    margin-left: 5%;
    margin-right: 5%;
  }

  @media (min-width: 1150px) {
    left: 325px;
    margin-left: 0;
    margin-right: auto;
    width: 1150px;
  }

  @media print {
    position: static;
    left: 0;
    margin-left: 0;
    margin-right: 0;
    //width: 7in;
    //width: 1000px;
    padding-bottom: 0;
  }
}


#page-sidebar { display: none; }

@media (min-width: 1150px) {
  #page-sidebar {
    font-size: 0.8rem;
    display: block;
    width: 275px;
    background-color: $theme-sidebarcolor;
    color: $mid-gray;
    border-right: solid 0 transparent;
    border-bottom: solid 0 transparent;
    border-bottom-right-radius: 1em;
    box-shadow: 0 0 3px $silver;
    padding: 1em;

    > header {
      text-align: center;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .title { font-weight: 400; font-size: 1.5em; }
    .backlink { font-size: 0.7em; }
  }

  #toc {
    display: block;

    // note that this affects all ul below
    //ul { margin: 0; list-style: none; padding: 0 }

    // first ul is just the top doc; the sections are nested in that
    > ul > li {
      margin-top: 2em;
      font-weight: 600;
      font-size: 1.2em;

      > ul > li {
        margin-top: 0.8em;
        font-weight: 400;
        font-size: 1em;

        > ul > li {
          margin-top: 0.4em;
          margin-left: 0.5rem;
          font-size: 0.9em;
          font-weight: 300;

          > ul > li {
            margin-top: 0.35em;
            margin-left: 0.5rem;
            font-size: 0.9em;

            > ul { display: none; }
          }
        }
      }
    }
  }
}

@media print {
  @page {
    margin-left: 1.5in;
    @bottom {
      content: counter(page)
    }
  }
  #page-sidebar { display: none; }
}

// don't need as much space for the first group-level heading below title
.page-content > .section > .section:first-of-type h2 {
  margin-top: 1em;
}

.page-logo {
  max-width: 50%;
  margin-top: 1em;
}

.raw-reveal {
  display: none;
}

p, div, pre {
  widows: 2;
  orphans: 2;
}

div.admonition {
  widows: 5;
  orphans: 5;
}

p + ul, p + ol {
  page-break-before: avoid;
}

table {
  page-break-inside: avoid;
}

pre {
  break-inside: avoid;
}

.page-content a {
  color: $dark-blue;
  font-weight: 400;
  text-decoration: none;

  &:hover {
    text-decoration: underline;
  }

  @media print {
    &.external::after { content: " <" attr(href) ">"; }
  }
}




// todo: we need a better api here
//
// .print-hide (hide from print)
// .print-show (show, even if normally wouldn't)
// .print-only (only only on print)
//
// same for .handouts, .slides (and should plan for .epub, too
//
// this kind of stuff isn't perfect -- it's better to use .. only, so the
// assets are purely skipped. when would we need this? is this just for
// printing?

.page-content .raw-reveal {
  display: none;
}


@media print {
  .noprint {
    display: none !important;
  }
}

h2 + div.section > h3:first-child {
  margin-top: 1em;
}

  img.drawio {
    //width: 50%;
  }

@media print {
}

.width-120 {
  margin-left: -1.25in;
  margin-right: -0.75in;
  width: 135%;
 }